<%= render :partial => 'layouts/header' %>

<main>
  <section class="search">
    <div class="container">
    	<h1>Procurar</h1>

    	<div class="col-md-4">
    		<div class="textSearch">
    			<h3>Selecione por estado </h3>
    		</div>
    		<div id="searchInputs" class="hidden">
    			<%= form_tag(search_path, :method => "get", id: "search-form", name: "search") do |f| %>
    				<%= hidden_field_tag(:state, @state, { name: 'search[state]' }) %>

					<div class="field" data-toggle="tooltip">
						<%= label_tag :animal_type, "Tipo" %>	
						<%= select_tag(:animal_type, options_for_select([['Selecione um tipo', nil], ['Cão', "Cão"], ['Gato', "Gato"]], params.dig(:search, :animal_type)), { class: 'form-control', name: 'search[animal_type]' })%>
				  	</div>

				    <div class="field" data-toggle="tooltip" id="dogs-list">
					<%= label_tag :race, "Raça" %>
					<%= select_tag(
						:race,
						options_for_select(@dog_races, params.dig(:search, :race)),
						{ class: 'form-control', name: 'search[race]' }
					) %>  	
					</div>
					
					<div class="field hidden" data-toggle="tooltip" id="cats-list">
					<%= label_tag :race, "Raça" %>
					<%= select_tag(
						:race,
						options_for_select(@cat_races, params.dig(:search, :race)),
						{class: 'form-control', name: 'search[race]' }
					)%>  	
					</div>

				  	<div class="field" data-toggle="tooltip">
				  		<%= label_tag :sex, "Sexo" %>	
				  		<%= select_tag(:sex, options_for_select([['Selecione um sexo', nil], ['Macho', 'Macho'], ['Fêmea', 'Fêmea']], params.dig(:search, :sex)), { class: 'form-control', name: 'search[sex]' })%>
				  	</div>

				  	<div class="field" data-toggle="tooltip">
				  		<%= label_tag :color, "Cor" %>	
				  		<%= text_field_tag(:color, params.dig(:search, :color), { class: 'form-control', name: 'search[color]' })%>
				  	</div>

				  	<div class="field" data-toggle="tooltip">
				  		<%= label_tag :age, "Idade" %>	
				  		<%= select_tag(
				  			:age,
				  			options_for_select(@ages, params.dig(:search, :age)),
				  			{ class: 'form-control', name: 'search[age]' }
				  		)%>
				  	</div>

				  	<div class="field" data-toggle="tooltip">
						<%= label_tag :size, "Porte" %>
						<%= select_tag(:size, options_for_select([['Selecione um tamanho', nil], ['Pequeno', 'Pequeno'], ['Médio', 'Médio'], ['Grande', 'Grande']], params.dig(:search, :size)), { class: 'form-control', name: 'search[size]' })%>
				  	</div>

					<%= submit_tag "Search" %>
				<% end %>
    		</div>
    	</div>
    	<% unless @state %>
    		<div class="col-md-8">
    			<%= render('map') %>
    		</div>
		<% end %>
		<% if @animals.present? %>
			<% @animals.each do |animal| %>
				<%= "#{animal.name} #{animal.animal_type} #{animal.sex} #{animal.size}"  %><br />
			<% end %>
		<% else %>
		  <p>Arruma isso izabela, não existem "<%= params[:search].values.join(', ') %>".</p>
		<% end %>
    </div>
 </section>
</main> 
